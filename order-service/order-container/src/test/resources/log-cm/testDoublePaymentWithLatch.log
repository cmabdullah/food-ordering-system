2023-03-14 20:56:40.512  INFO 2627 --- [-consumer-2-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.512  INFO 2627 --- [-consumer-0-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.512  INFO 2627 --- [-consumer-1-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.512  INFO 2627 --- [-consumer-0-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.514  INFO 2627 --- [-consumer-2-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.515  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.515  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.515  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.515  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.514  INFO 2627 --- [-consumer-1-C-1] org.apache.kafka.clients.Metadata        : [Consumer clientId=consumer-payment-topic-consumer-5, groupId=payment-topic-consumer] Cluster ID: NLT3ZwnUQf2hyrkdW4MhjQ
2023-03-14 20:56:40.518  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.518  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.519  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.519  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.517  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.523  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.523  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-5, groupId=payment-topic-consumer] Discovered group coordinator 192.168.0.6:9092 (id: 2147483647 rack: null)
2023-03-14 20:56:40.525  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-5, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.547  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.548  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.548  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.553  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd', protocol='range'}
2023-03-14 20:56:40.554  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.555  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.557  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-1-2e011126-95fb-41fc-87b3-fdbdadad3ae2', protocol='range'}
2023-03-14 20:56:40.557  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-2-091de489-2a0d-42b6-99c3-8f3369c33ef3', protocol='range'}
2023-03-14 20:56:40.558  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Finished assignment for group at generation 1: {consumer-restaurant-approval-topic-consumer-3-10d2674d-5503-49b5-9740-79b370fc6d26=Assignment(partitions=[]), consumer-restaurant-approval-topic-consumer-1-2e011126-95fb-41fc-87b3-fdbdadad3ae2=Assignment(partitions=[restaurant-approval-response-0]), consumer-restaurant-approval-topic-consumer-2-091de489-2a0d-42b6-99c3-8f3369c33ef3=Assignment(partitions=[])}
2023-03-14 20:56:40.559  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Finished assignment for group at generation 1: {consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd=Assignment(partitions=[payment-response-0])}
2023-03-14 20:56:40.561  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Successfully joined group with generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-3-10d2674d-5503-49b5-9740-79b370fc6d26', protocol='range'}
2023-03-14 20:56:40.565  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] SyncGroup failed: The group began another rebalance. Need to re-join the group. Sent generation was Generation{generationId=1, memberId='consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd', protocol='range'}
2023-03-14 20:56:40.566  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.568  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-1-2e011126-95fb-41fc-87b3-fdbdadad3ae2', protocol='range'}
2023-03-14 20:56:40.569  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Successfully joined group with generation Generation{generationId=2, memberId='consumer-payment-topic-consumer-6-65b0c5f9-2b29-4a42-b481-914b69ba88df', protocol='range'}
2023-03-14 20:56:40.568  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-2-091de489-2a0d-42b6-99c3-8f3369c33ef3', protocol='range'}
2023-03-14 20:56:40.569  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Successfully joined group with generation Generation{generationId=2, memberId='consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd', protocol='range'}
2023-03-14 20:56:40.569  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Notifying assignor about the new Assignment(partitions=[restaurant-approval-response-0])
2023-03-14 20:56:40.569  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Finished assignment for group at generation 2: {consumer-payment-topic-consumer-6-65b0c5f9-2b29-4a42-b481-914b69ba88df=Assignment(partitions=[]), consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd=Assignment(partitions=[payment-response-0])}
2023-03-14 20:56:40.569  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Notifying assignor about the new Assignment(partitions=[])
2023-03-14 20:56:40.570  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-2, groupId=restaurant-approval-topic-consumer] Adding newly assigned partitions:
2023-03-14 20:56:40.570  INFO 2627 --- [-consumer-1-C-1] o.s.k.l.KafkaMessageListenerContainer    : restaurant-approval-topic-consumer: partitions assigned: []
2023-03-14 20:56:40.573  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Successfully synced group in generation Generation{generationId=1, memberId='consumer-restaurant-approval-topic-consumer-3-10d2674d-5503-49b5-9740-79b370fc6d26', protocol='range'}
2023-03-14 20:56:40.574  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Adding newly assigned partitions: restaurant-approval-response-0
2023-03-14 20:56:40.574  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Successfully synced group in generation Generation{generationId=2, memberId='consumer-payment-topic-consumer-6-65b0c5f9-2b29-4a42-b481-914b69ba88df', protocol='range'}
2023-03-14 20:56:40.574  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Successfully synced group in generation Generation{generationId=2, memberId='consumer-payment-topic-consumer-4-3729b05d-5b51-46af-8376-31b0163101dd', protocol='range'}
2023-03-14 20:56:40.575  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Notifying assignor about the new Assignment(partitions=[payment-response-0])
2023-03-14 20:56:40.575  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Notifying assignor about the new Assignment(partitions=[])
2023-03-14 20:56:40.575  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Adding newly assigned partitions: payment-response-0
2023-03-14 20:56:40.576  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-6, groupId=payment-topic-consumer] Adding newly assigned partitions:
2023-03-14 20:56:40.576  INFO 2627 --- [-consumer-2-C-1] o.s.k.l.KafkaMessageListenerContainer    : payment-topic-consumer: partitions assigned: []
2023-03-14 20:56:40.577  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Notifying assignor about the new Assignment(partitions=[])
2023-03-14 20:56:40.578  INFO 2627 --- [-consumer-2-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-3, groupId=restaurant-approval-topic-consumer] Adding newly assigned partitions:
2023-03-14 20:56:40.578  INFO 2627 --- [-consumer-2-C-1] o.s.k.l.KafkaMessageListenerContainer    : restaurant-approval-topic-consumer: partitions assigned: []
2023-03-14 20:56:40.581  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-5, groupId=payment-topic-consumer] Request joining group due to: need to re-join with the given member-id
2023-03-14 20:56:40.581  INFO 2627 --- [-consumer-1-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-5, groupId=payment-topic-consumer] (Re-)joining group
2023-03-14 20:56:40.582  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Found no committed offset for partition payment-response-0
2023-03-14 20:56:40.582  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Found no committed offset for partition restaurant-approval-response-0
2023-03-14 20:56:40.598  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-restaurant-approval-topic-consumer-1, groupId=restaurant-approval-topic-consumer] Resetting offset for partition restaurant-approval-response-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[192.168.0.6:9092 (id: 0 rack: null)], epoch=0}}.
2023-03-14 20:56:40.599  INFO 2627 --- [-consumer-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : restaurant-approval-topic-consumer: partitions assigned: [restaurant-approval-response-0]
2023-03-14 20:56:40.599  INFO 2627 --- [-consumer-0-C-1] o.a.k.c.c.internals.SubscriptionState    : [Consumer clientId=consumer-payment-topic-consumer-4, groupId=payment-topic-consumer] Resetting offset for partition payment-response-0 to position FetchPosition{offset=0, offsetEpoch=Optional.empty, currentLeader=LeaderAndEpoch{leader=Optional[192.168.0.6:9092 (id: 0 rack: null)], epoch=0}}.
2023-03-14 20:56:40.599  INFO 2627 --- [-consumer-0-C-1] o.s.k.l.KafkaMessageListenerContainer    : payment-topic-consumer: partitions assigned: [payment-response-0]
Hibernate: select paymentout0_.id as id1_5_, paymentout0_.created_at as created_2_5_, paymentout0_.order_status as order_st3_5_, paymentout0_.outbox_status as outbox_s4_5_, paymentout0_.payload as payload5_5_, paymentout0_.processed_at as processe6_5_, paymentout0_.saga_id as saga_id7_5_, paymentout0_.saga_status as saga_sta8_5_, paymentout0_.type as type9_5_, paymentout0_.version as version10_5_ from payment_outbox paymentout0_ where paymentout0_.type=? and paymentout0_.saga_id=? and (paymentout0_.saga_status in (?))
Hibernate: select paymentout0_.id as id1_5_, paymentout0_.created_at as created_2_5_, paymentout0_.order_status as order_st3_5_, paymentout0_.outbox_status as outbox_s4_5_, paymentout0_.payload as payload5_5_, paymentout0_.processed_at as processe6_5_, paymentout0_.saga_id as saga_id7_5_, paymentout0_.saga_status as saga_sta8_5_, paymentout0_.type as type9_5_, paymentout0_.version as version10_5_ from payment_outbox paymentout0_ where paymentout0_.type=? and paymentout0_.saga_id=? and (paymentout0_.saga_status in (?))
2023-03-14 20:56:40.988  INFO 2627 --- [       Thread-2] c.f.o.s.o.s.domain.OrderPaymentSaga      : Completing payment for order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17
2023-03-14 20:56:40.988  INFO 2627 --- [       Thread-1] c.f.o.s.o.s.domain.OrderPaymentSaga      : Completing payment for order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17
Hibernate: select orderentit0_.id as id1_4_0_, orderentit0_.customer_id as customer2_4_0_, orderentit0_.failure_messages as failure_3_4_0_, orderentit0_.order_status as order_st4_4_0_, orderentit0_.price as price5_4_0_, orderentit0_.restaurant_id as restaura6_4_0_, orderentit0_.tracking_id as tracking7_4_0_, orderaddre1_.id as id1_2_1_, orderaddre1_.city as city2_2_1_, orderaddre1_.order_id as order_id5_2_1_, orderaddre1_.postal_code as postal_c3_2_1_, orderaddre1_.street as street4_2_1_ from orders orderentit0_ left outer join order_address orderaddre1_ on orderentit0_.id=orderaddre1_.order_id where orderentit0_.id=?
Hibernate: select orderentit0_.id as id1_4_0_, orderentit0_.customer_id as customer2_4_0_, orderentit0_.failure_messages as failure_3_4_0_, orderentit0_.order_status as order_st4_4_0_, orderentit0_.price as price5_4_0_, orderentit0_.restaurant_id as restaura6_4_0_, orderentit0_.tracking_id as tracking7_4_0_, orderaddre1_.id as id1_2_1_, orderaddre1_.city as city2_2_1_, orderaddre1_.order_id as order_id5_2_1_, orderaddre1_.postal_code as postal_c3_2_1_, orderaddre1_.street as street4_2_1_ from orders orderentit0_ left outer join order_address orderaddre1_ on orderentit0_.id=orderaddre1_.order_id where orderentit0_.id=?
Hibernate: select items0_.order_id as order_id6_3_0_, items0_.id as id1_3_0_, items0_.id as id1_3_1_, items0_.order_id as order_id6_3_1_, items0_.price as price2_3_1_, items0_.product_id as product_3_3_1_, items0_.quantity as quantity4_3_1_, items0_.sub_total as sub_tota5_3_1_ from order_items items0_ where items0_.order_id=?
Hibernate: select items0_.order_id as order_id6_3_0_, items0_.id as id1_3_0_, items0_.id as id1_3_1_, items0_.order_id as order_id6_3_1_, items0_.price as price2_3_1_, items0_.product_id as product_3_3_1_, items0_.quantity as quantity4_3_1_, items0_.sub_total as sub_tota5_3_1_ from order_items items0_ where items0_.order_id=?
2023-03-14 20:56:41.081  INFO 2627 --- [       Thread-2] c.f.o.s.o.s.d.s.OrderDomainServiceImpl   : Order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17 is paid
2023-03-14 20:56:41.081  INFO 2627 --- [       Thread-1] c.f.o.s.o.s.d.s.OrderDomainServiceImpl   : Order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17 is paid
2023-03-14 20:56:41.132  INFO 2627 --- [       Thread-1] c.f.o.s.o.s.d.o.s.p.PaymentOutboxHelper  : OrderPaymentOutboxMessage saved with outbox id: 8904808e-286f-449b-9b56-b63ba8351cf2
2023-03-14 20:56:41.166  INFO 2627 --- [       Thread-2] c.f.o.s.o.s.d.o.s.p.PaymentOutboxHelper  : OrderPaymentOutboxMessage saved with outbox id: 8904808e-286f-449b-9b56-b63ba8351cf2
Hibernate: select approvalou0_.id as id1_6_0_, approvalou0_.created_at as created_2_6_0_, approvalou0_.order_status as order_st3_6_0_, approvalou0_.outbox_status as outbox_s4_6_0_, approvalou0_.payload as payload5_6_0_, approvalou0_.processed_at as processe6_6_0_, approvalou0_.saga_id as saga_id7_6_0_, approvalou0_.saga_status as saga_sta8_6_0_, approvalou0_.type as type9_6_0_, approvalou0_.version as version10_6_0_ from restaurant_approval_outbox approvalou0_ where approvalou0_.id=?
Hibernate: select approvalou0_.id as id1_6_0_, approvalou0_.created_at as created_2_6_0_, approvalou0_.order_status as order_st3_6_0_, approvalou0_.outbox_status as outbox_s4_6_0_, approvalou0_.payload as payload5_6_0_, approvalou0_.processed_at as processe6_6_0_, approvalou0_.saga_id as saga_id7_6_0_, approvalou0_.saga_status as saga_sta8_6_0_, approvalou0_.type as type9_6_0_, approvalou0_.version as version10_6_0_ from restaurant_approval_outbox approvalou0_ where approvalou0_.id=?
2023-03-14 20:56:41.387  INFO 2627 --- [       Thread-2] c.f.o.s.o.s.d.o.s.a.ApprovalOutboxHelper : OrderApprovalOutboxMessage saved with outbox id: 648fffc8-db17-4f6f-8196-c1754c63f2c8
2023-03-14 20:56:41.388  INFO 2627 --- [       Thread-2] c.f.o.s.o.s.domain.OrderPaymentSaga      : Order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17 is paid
2023-03-14 20:56:41.388  INFO 2627 --- [       Thread-1] c.f.o.s.o.s.d.o.s.a.ApprovalOutboxHelper : OrderApprovalOutboxMessage saved with outbox id: 63266cdf-4a61-4cbf-9c47-c8df9e2267e8
2023-03-14 20:56:41.389  INFO 2627 --- [       Thread-1] c.f.o.s.o.s.domain.OrderPaymentSaga      : Order with id: d215b5f8-0249-4dc5-89a3-51fd148cfb17 is paid
Hibernate: insert into restaurant_approval_outbox (created_at, order_status, outbox_status, payload, processed_at, saga_id, saga_status, type, version, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into restaurant_approval_outbox (created_at, order_status, outbox_status, payload, processed_at, saga_id, saga_status, type, version, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: update payment_outbox set created_at=?, order_status=?, outbox_status=?, payload=?, processed_at=?, saga_id=?, saga_status=?, type=?, version=? where id=? and version=?
Hibernate: update payment_outbox set created_at=?, order_status=?, outbox_status=?, payload=?, processed_at=?, saga_id=?, saga_status=?, type=?, version=? where id=? and version=?
Hibernate: update orders set customer_id=?, failure_messages=?, order_status=?, price=?, restaurant_id=?, tracking_id=? where id=?
2023-03-14 20:56:41.521  INFO 2627 --- [       Thread-2] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements
2023-03-14 20:56:41.529 ERROR 2627 --- [       Thread-2] c.f.o.s.o.s.domain.OrderPaymentSagaTest  : OptimisticLockingFailureException occurred for thread2
Hibernate: select paymentout0_.id as id1_5_, paymentout0_.created_at as created_2_5_, paymentout0_.order_status as order_st3_5_, paymentout0_.outbox_status as outbox_s4_5_, paymentout0_.payload as payload5_5_, paymentout0_.processed_at as processe6_5_, paymentout0_.saga_id as saga_id7_5_, paymentout0_.saga_status as saga_sta8_5_, paymentout0_.type as type9_5_, paymentout0_.version as version10_5_ from payment_outbox paymentout0_ where paymentout0_.type=? and paymentout0_.saga_id=? and (paymentout0_.saga_status in (?))
